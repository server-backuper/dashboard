<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Authorization</title>
</head>

<body>
  <script>
    function getCookie(name) {
      let matches = document.cookie.match(new RegExp(
        "(?:^|; )" + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + "=([^;]*)"
      ));
      return matches ? decodeURIComponent(matches[1]) : undefined;
    }
    let params = new URLSearchParams(location.hash.slice(1));
    if (params.get('access_token')) {
      document.cookie =
        `token=${params.get('access_token')}; path=/; max-age=${params.get('expires_in')}`;
      location.hash = '';
      location.pathname = '/';
    } else {
      location.href =
        'https://discord.com/api/oauth2/authorize?client_id=797792817983389726&redirect_uri=http%3A%2F%2Fdashboard.server-backuper.ml%2Fauthorize&response_type=token&scope=identify%20guilds';
    }
  </script>
</body>

</html>
